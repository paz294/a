<script>
const challengesData = [
    {
        theme: 'âš½ Football',
        difficulty: 'Easy',
        title: 'Challenge #1: Match Day Simulator',
        description: 'Generate a random football match result between Team You and Team Him. Add fun commentary!',
        example: `Example Output:\nTeam Him 3 - 2 Team You\nCommentary: He scored a last-minute goal! âš½`,
        completed: false
    },
    {
        theme: 'ðŸ’• Relationship',
        difficulty: 'Easy',
        title: 'Challenge #2: Love Message Encoder',
        description: 'Create a program that encodes a secret message only the two of you can decode.',
        example: `Input: I love you\nOutput: â¤ï¸ðŸŒ¹#you#love#I`,
        completed: false
    },
    {
        theme: 'ðŸŽ® Games',
        difficulty: 'Medium',
        title: 'Challenge #3: Rock Paper Scissors â€“ Love Edition',
        description: 'Add fun or romantic outcomes depending on who wins each round.',
        example: `Input: Rock\nOutput: You win! ðŸ’˜`,
        completed: false
    }
];

let currentModalIndex = null;
const modal = document.getElementById('challengeModal');

function openModal(cardElement) {
    // Determine which challenge was clicked
    const cards = document.querySelectorAll('.challenge-card');
    currentModalIndex = Array.from(cards).indexOf(cardElement);

    const data = challengesData[currentModalIndex];

    // Fill modal content
    document.getElementById('modal-theme').textContent = data.theme;
    const diffEl = document.getElementById('modal-difficulty');
    diffEl.textContent = data.difficulty;
    diffEl.className = `difficulty ${data.difficulty.toLowerCase()}`;
    document.getElementById('modal-title').textContent = data.title;
    document.getElementById('modal-description').textContent = data.description;
    document.getElementById('modal-example').textContent = data.example;

    // Show modal
    modal.style.display = 'block';
}

function closeModal() {
    modal.style.display = 'none';
}

function markModalCompleted() {
    if (currentModalIndex === null) return;

    challengesData[currentModalIndex].completed = true;

    // Update card styling
    const cards = document.querySelectorAll('.challenge-card');
    cards[currentModalIndex].classList.add('completed');

    updateProgress();
    closeModal();
}

// Close modal if clicked outside content
window.onclick = function(event) {
    if (event.target === modal) closeModal();
}

// Progress bar
function updateProgress() {
    const completed = challengesData.filter(c => c.completed).length;
    const percentage = (completed / challengesData.length) * 100;
    document.getElementById('progress-bar').style.width = percentage + '%';
}

// Category filter
function filterChallenges(category) {
    const cards = document.querySelectorAll('.challenge-card');
    cards.forEach((c, i) => {
        if (category === 'all' || challengesData[i].theme.includes(category)) {
            c.style.display = 'block';
        } else {
            c.style.display = 'none';
        }
    });

    document.querySelectorAll('aside li').forEach(li => li.classList.remove('active'));
    const activeLi = Array.from(document.querySelectorAll('aside li'))
        .find(li => li.textContent.includes(category) || (category==='all' && li.textContent.includes('All')));
    if(activeLi) activeLi.classList.add('active');
}
</script>
