<script>
const challenges = [
  {
    id: 'match-day',
    theme: '⚽ Football',
    difficulty: 'Easy',
    title: 'Match Day Simulator',
    description: 'Generate a random football match result between Team You and Team Him.',
    example: 'Example Output:\nTeam Him 3 - 2 Team You\nCommentary: He scored a last-minute goal! ⚽',
  },
  {
    id: 'love-encoder',
    theme: '💕 Relationship',
    difficulty: 'Easy',
    title: 'Love Message Encoder',
    description: 'Create a program that encodes a secret message only the two of you can decode.',
    example: 'Input: I love you\nOutput: ❤️🌹#you#love#I',
  }
];

// Populate sidebar
const list = document.getElementById('challenge-list');
challenges.forEach(c => {
  const li = document.createElement('li');
  li.textContent = c.title;
  li.onclick = () => { location.hash = c.id; };
  list.appendChild(li);
});

// Listen for hash changes
window.addEventListener('hashchange', loadChallengeFromHash);
window.addEventListener('load', loadChallengeFromHash);

function loadChallengeFromHash() {
  const hash = location.hash.slice(1); // remove #
  const challenge = challenges.find(c => c.id === hash);
  const panel = document.getElementById('challenge-panel');

  if (!challenge) {
    panel.innerHTML = '<p>Select a challenge from the left to start coding!</p>';
    return;
  }

  panel.innerHTML = `
    <div class="challenge-title">${challenge.title}</div>
    <div class="challenge-theme">${challenge.theme}</div>
    <div class="challenge-difficulty ${challenge.difficulty.toLowerCase()}">${challenge.difficulty}</div>
    <p>${challenge.description}</p>
    <pre>${challenge.example}</pre>
    <textarea placeholder="Write your code here..."></textarea>
    <button onclick="markCompleted('${challenge.id}')">Mark Completed</button>
  `;

  // Highlight active
  document.querySelectorAll('#challenge-list li').forEach(li => li.classList.remove('active'));
  const activeIndex = challenges.findIndex(c => c.id === hash);
  if (activeIndex >= 0) list.children[activeIndex].classList.add('active');
}

function markCompleted(id) {
  const challenge = challenges.find(c => c.id === id);
  challenge.completed = true;
  updateProgress();
}

function updateProgress() {
  const completedCount = challenges.filter(c => c.completed).length;
  const percentage = (completedCount / challenges.length) * 100;
  document.getElementById('progress-bar').style.width = percentage + '%';
}
</script>
